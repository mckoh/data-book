
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Michael Kohlegger">
      
      
        <link rel="canonical" href="https://mckoh.github.io/data-book/tutorials/dbs_interaction/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>DBS Interaktion - Data Book</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dbs-interaktion" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Data Book" class="md-header__button md-logo" aria-label="Data Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DBS Interaktion
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Data Book" class="md-nav__button md-logo" aria-label="Data Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>

    </a>
    Data Book
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lerninhalte
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exercises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Übungsaufgaben
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Über
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="dbs-interaktion">DBS Interaktion</h1>
<p>Hier fasse ich euch noch einmal kurz und knapp zusammen, auf welche Weise ihr mit unseren DBS interagieren könnt. Dabei müssen wir zwischen unterschiedlichen DBS trennen.</p>
<h2 id="microsoft-sql-server">Microsoft SQL Server</h2>
<p>SQL Server ist ein DBS, das nach relationalen Grundsätzen arbeitet und wird von Microsoft vertrieben. SQL Server ist in unterschiedlichen Ausführungen am Markt erhältlich z.B. SQL Server Express (offene Version, nur relationale DBs, nutzt max. 1GB RAM) SQL Server Developer (vollständiger Funktionsumfang, "nur" zum Experimentieren), SQL Server Enterprise (vollständiger Funktionsumfang, für professionellen Einsatz).</p>
<blockquote>
<p>Wir haben uns mit SQL Server nur aus der Not heraus beschäftigt, weil wir nicht auf unsern MySQL Server zugreifen konnten.</p>
</blockquote>
<h3 id="sql-server-management-studio">SQL Server Management Studio</h3>
<p>Microsoft bietet passend zu seinem SQL Server das SQL Server Management Studio an. Diese Anwendung erlaubt es euch mit dem Server via SQL (und teilweise auch über grafische) Oberflächen zu interagieren.</p>
<p><img alt="Screenshot SQL Server Management Studi0" src="img/ssms.PNG" /></p>
<h3 id="python-pyodbc">Python <code>pyodbc</code></h3>
<p>Wenn ihr eure Daten auf einem SQL Server liegen habt, eure Analysen aber in Python machen wollt, könnt ihr euch die Daten auch direkt in Python laden. Dazu nutzen wir die ODBC-Schnittstelle (Open Database Connection) unseres SQL Servers, die wir mit Hilfe der <code>pyodbc</code> Bibliothek ansprechen können.</p>
<p>Installieren könnt ihr <code>pyodbc</code> direkt über pip, wenn ihr folgende Sequenz auf eurer Kommandozeile (Windows) bzw. in eurem Terminal (wenn ich auf Mac oder Linux seid) ausführt:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pyodbc
</code></pre></div></td></tr></table></div>
<p>Unterhalb habe ich euch beispielhaft eine Code-Schnipsel eingefügt, das eine Komplette Konversation mit meinem lokalen SQL Server zeigt.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">pyodbc</span>

<span class="c1"># The so called connection string holds all the information about the DBS</span>
<span class="n">connection_string</span> <span class="o">=</span> <span class="s1">&#39;DRIVER={SQL Server};SERVER=L1-KOHMIC-01;DATABASE=sales&#39;</span>

<span class="c1"># The connect method contacts the server and keeps the contact alive</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">pyodbc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">connection_string</span><span class="p">)</span>

<span class="c1"># The cursor is just a vehicle that we use to pass our queries and return results</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># The execute method does the actual query work for us</span>
<span class="c1"># You can feed any SQL statement to that method (also DML and/or DDL statements)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales.dbo.artikel AS a WHERE a.preis &lt; 500;&quot;</span><span class="p">)</span>

<span class="c1"># The cursor object holds all the results in form of an iterable that we can iterate now</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="c1"># Closing cursor and connection ends the overall communication with the server</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="mysql">MySQL</h2>
<p>MySQL ist, wie SQL Server, ein DBS, das nach relationalen Printzip funktioniert und wird von Oracle vertrieben. Auch MySQL kann in unterschiedlichen Ausführungen betrieben werden. Das umfasst einerseits das Lizenzmodell, aber andererseits auch die <a href="https://dev.mysql.com/doc/refman/8.0/en/storage-engines.html">Engine</a>, die der MySQL Server verwendet um seine Daten zu managen (die populärsten Engines sind MyISAM, InnoDB, Memory, Blackhole).</p>
<h3 id="mysql-workbench">MySQL <strong>Workbench</strong></h3>
<p>Die Workbench ist - ähnlich wie SQL Server Management Studio - eine eigenständige Software, die es euch erlaubt mit MySQL zu interagieren. Zusätzlich zu SQL unterstütz sie euch auch durch eine grafische Benutzeroberfläche. Manche Dinge könnt ihr so auch ohne SQL-Script einstellen.</p>
<p><img alt="Screenshot von MySQL Workbench" src="img/mswb.PNG" /></p>
<h3 id="python-via-mysqlconnector"><strong>Python</strong> via <code>mysql.connector</code></h3>
<p>Diese Option ist wunderbar geeignet, wenn ihr Daten aus einem DBS laden wollt, um diese direkt in Python weiter zu verarbeiten. Mit Hilfe des <code>mysql.connector</code> ist das sehr einfach. Ihr könntet auch <code>pyodbc</code> (siehe oben) verwenden, da auch MySQL über eine Open Database Connection (ODBC) Schnittstelle verfügt. <code>mysql.connector</code> ist aber vor allem deshalb so praktisch, weil ihr euch dort die ganze Driver-Info sparen könnt - das Ding funktioniert eben nur mit MySQL.</p>
<p>So könnt ihr <code>mysql.connector</code> auf eurem System installieren:</p>
<p><code>shell
pip install mysql-connector</code></p>
<p>Und so könnte ein beispielhafter Datenabruf aussehen. Hier verbinde ich mich übrigens mit unserem DSIA-MySQL-Cluster im Lab. Ihr könnt natürlich je nach Anwendungsfall der <code>connect</code>-Methode andere Attribute übergeben...</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">mysql.connector</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">mc</span>

<span class="c1"># The connect method contacts the server and keeps the contact alive</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
    <span class="n">host</span><span class="o">=</span><span class="s1">&#39;80.93.46.242&#39;</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span>
    <span class="n">user</span><span class="o">=</span><span class="s1">&#39;db&#39;</span><span class="p">,</span>
    <span class="n">passwd</span><span class="o">=</span><span class="s2">&quot;Qwertzuiop123456!&quot;</span>
<span class="p">)</span>

<span class="c1"># The cursor is just a vehicle that we use to pass our queries and return results</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># The execute method does the actual query work for us</span>
<span class="c1"># You can feed any SQL statement to that method (also DML and/or DDL statements)</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sales.artikel AS a WHERE a.preis &lt; 500;&quot;</span><span class="p">)</span>

<span class="c1"># The cursor object holds all the results in form of an iterable that we can iterate now</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="c1"># Closing cursor and connection ends the overall communication with the server</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="terminal-unix-bzw-kommandozeile-windows">Terminal (Unix) bzw. Kommandozeile (Windows)</h3>
<p>Das ist, sozusagen, die Basisoption, die euch immer bleibt. Sobald ihr auf einem Rechner (eigener Rechner oder auch Server) MySQL aufsetzt, wird auch der shell-Client mitinstalliert. Dieser erlaubt es euch, mit dem MySQL-Server direct auf der Kommandozeile eures jeweiligen Systems zu interagieren. Unterhalb bin ich etwa gerade mit dem Node01 unseres MySQL Clusters verbunden und führe direkt im Terminal eine SQL Abfrage aus.</p>
<p>Das CLI (command line interface) von MySQL kann am Hostrechner (der Rechner, auf dem der MySQL-Service läuft) mit folgendem Befehl im Terminal/Kommandozeile aufgerufen werden:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>mysql<span class="w"> </span>-u<span class="w"> </span><span class="o">{</span>username<span class="o">}</span><span class="w"> </span>-p
</code></pre></div></td></tr></table></div>
<p><img alt="Screenshot eines Shell Fensters" src="img/shell.PNG" /></p>
<h2 id="apache-cassandra">Apache Cassandra</h2>
<p>Apache Cassandra ist ein Wide-Column Store. Wir verwenden Cassandra um strukturierte Daten zu speichern, verzichten hier aber auf JOINS (wie sie im relationalen Modell vorkommen). In Cassandra arbeiten wir deshalb mit (mehr oder weniger) großen Einzeltabellen.</p>
<h3 id="python-via-dse">Python via <code>dse</code></h3>
<p>Der <code>dse</code> (DataStaxx Enterprise) driver wird von DataStaxx für die interaktion mit Apache Cassandra zur Verfügung gestellt und folgt beim Interaktionsablauf dem Modell anderer DBS-driver (z.B. ODBC). </p>
<p>So könnt ihr <code>dse</code> auf eurem System installieren. <strong>Achtung:</strong> Derzeit (2018-11-24) ist der driver offensichtlich nicht mit der aktuellen Version von Python (3.7) kompatibel. Deshalb muss der driver unter Python 3.5 oder 3.6 installiert werden.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>dse-driver
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dse.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cluster</span>

<span class="c1"># We first create a new instance of the Cluster class</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">([</span><span class="s1">&#39;80.93.46.242&#39;</span><span class="p">],</span> <span class="n">port</span><span class="o">=</span><span class="mi">3308</span><span class="p">)</span>

<span class="c1"># Next, we instantiate a connection object by calling the connect method of Cluster</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># Then we define the query we want to send</span>
<span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM kohlegger_sales.bestellung_nach_mitarbeiter;&quot;</span>

<span class="c1"># ... and execute it on our connection object</span>
<span class="n">rows</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="c1"># Here we iterate over the rows object to print the single records</span>
<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

<span class="c1"># Finally, we close the connection using the Cluster&#39;s shutdown method</span>
<span class="n">connection</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="terminal-unix-bzw-kommandozeile-windows_1">Terminal (Unix) bzw. Kommandozeile (Windows)</h3>
<p>Ähnlich wie in MySQL gibt es auch in Cassandra ein einfaches CLI (command line interface), das wir verwenden können um direkt am Server mit unserem Cluster zu interagieren.</p>
<p>Das CLI von Cassandra kann am Hostrechner (der Rechner, auf dem der Cassandra-Service läuft) mit folgendem Befehl im Terminal/Kommandozeile aufgerufen werden (hier am Beispiel des Rechners mit der IP <code>192.168.150.213</code> und dem Port <code>9142</code>):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>cqlsh<span class="w"> </span><span class="m">192</span>.168.150.213<span class="w"> </span>-port<span class="w"> </span><span class="m">9142</span>
</code></pre></div></td></tr></table></div>
<p><img alt="Screenshot eines Terminal Fensters mit CQLSH" src="img/cqlsh.PNG" /></p>
<h2 id="neo4j">Neo4J</h2>
<p>Neo4J ist ein Graphen-DB (GDB) System. Anstelle von Tabellen verwendet dieses System Graphen, um Daten zu repräsentieren. Ein Graph ist eine netzartige Struktur aus Knoten (aka "Vertex") und Relationen (aka "Kante"/"Edge" bzw. "Arc" wenn mit Richtungssinn) . Knoten repräsentieren dabei Objekte, über die Daten erfasst werden sollen. Darin unterscheidet sich das Graphen-Konzept noch wenig vom relationalen oder Wide-Column-Modell. Beziehungen verbinden Knoten miteinander. Sowohl Knoten, als auch Relationen können typisiert werden.</p>
<p><img alt="Darstellung eines Graph" src="/img/graph.PNG" /></p>
<p>GDBs sind besonders dann geeignet, wenn der Speicher- und Analysefokus insbesondere auf Beziehungen zwischen Datenobjekten liegt. RDBs können zwar graphenartige Datenstrukturen abbilden. Die Auswertung dieser Datenstrukturen ist aber komplizierter.</p>
<h3 id="neo4j-browser">Neo4J Browser</h3>
<p>Neo4J bietet passend zum Neo4J Server einen Web-basierten Browser, der zur Datenbankinteraktion verwendet werden kann. Mit dieser Anwendung könnt ihr Cypher-Abfrage verfassen und abschicken. Neben der Standardausgabe verfügt der Browser über eine Rendering-Engine für Graph-Daten (siehe Screenshot).</p>
<p><img alt="Screenshot Neo4J Browser" src="img/neo4jbrowserimg.png" /></p>
<h3 id="python-neo4j">Python <code>neo4j</code></h3>
<p>Wenn ihr eure Daten auf einem Neo4J Server liegen habt, eure Analysen aber in Python machen wollt, könnt ihr euch die Daten auch direkt in Python laden. Dazu nutzen wir die Bolt-Schnittstelle unseres Servers und die <code>neo4j</code> Bibliothek. Im vergleich zu anderen Python-Bibliotheken ist die Struktur hier aber vor allem durch die Verwendung von Dekorator-Functions geprägt.</p>
<p>Installieren könnt ihr <code>neo4j</code> direkt über pip, wenn ihr folgende Sequenz auf eurer Kommandozeile (Windows) bzw. in eurem Terminal (wenn ich auf Mac oder Linux seid) ausführt:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>neo4j
</code></pre></div></td></tr></table></div>
<p>Unterhalb habe ich euch beispielhaft eine Code-Schnipsel eingefügt, das eine Komplette Konversation mit meinem lokalen SQL Server zeigt.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">neo4j</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphDatabase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">getpass</span><span class="w"> </span><span class="kn">import</span> <span class="n">getpass</span>

<span class="c1"># First we create an instance of the GraphDatabase Object using the driver function</span>
<span class="n">my_auth</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;username&quot;</span><span class="p">,</span> <span class="s2">&quot;passwort&quot;</span><span class="p">)</span>
<span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;bolt://80.93.46.242:3311&quot;</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">GraphDatabase</span><span class="o">.</span><span class="n">driver</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">my_auth</span><span class="p">)</span>


<span class="c1"># We define a function that is specifically tailored towards a paricular analysis scenario (here: We are searching for Persons [pa] that are in an interacts_with relationship with a Person [pb]. We are additionally restricting the output to person that match the given input-name)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">print_friends_of</span><span class="p">(</span><span class="n">tx</span><span class="p">,</span> <span class="n">name_input</span><span class="p">):</span>
    <span class="n">match_list</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s1">&#39;MATCH (pa:Person)-[:Interact_with]-&gt;(pb:Person) WHERE pb.name = &quot;</span><span class="si">{}</span><span class="s1">&quot; RETURN pa.name&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name_input</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">match_list</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;pa.name&quot;</span><span class="p">])</span>

<span class="c1"># We are handing the function and Search name to the driver session.</span>
<span class="k">with</span> <span class="n">driver</span><span class="o">.</span><span class="n">session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="n">session</span><span class="o">.</span><span class="n">read_transaction</span><span class="p">(</span><span class="n">print_friends_of</span><span class="p">,</span> <span class="s2">&quot;Jack&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="mongodb">MongoDb</h2>
<h3 id="robomongo">Robomongo</h3>
<p>Robomongo ist ein vollwertiger Admin-Client, der es euch erlaubt mit einem MongoDB-Server zu kommunizieren, diesen zu administrieren und Abfragen zu schicken. Er verfügt, wie andere DBS-Clients auch, über eine grafische Oberfläche und einen Objekt-Explorer (siehe Screenshot).</p>
<p><img alt="Screenshot Robomongo Client" src="img/robomongoimg.png" /></p>
<h3 id="python-pymongo">Python <code>pymongo</code></h3>
<p>Mit Hilfe der <code>pymongo</code> Bibliothek könnt ihr MongoDB auch von Python aus verwalten. Die Interaktion läuft ähnlich, wie bei anderen DBS-Bibliotheken ab. Größter Unterschied ist aber sicherlich, dass weder Datenbanken, noch Collections bewusst erzeugt werden müssen. Stattdessen werden diese angelegt, wenn ihr sie verwendet und sie bisher noch nicht existieren.</p>
<p>Installieren könnt ihr <code>pymongo</code> direkt über pip, wenn ihr folgende Sequenz auf eurer Kommandozeile (Windows) bzw. in eurem Terminal (wenn ich auf Mac oder Linux seid) ausführt:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>pymongo
</code></pre></div></td></tr></table></div>
<p>Unterhalb habe ich euch beispielhaft eine Code-Schnipsel eingefügt, das eine Komplette Konversation mit einem remoten MongoDB Server zeigt.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pymongo</span><span class="w"> </span><span class="kn">import</span> <span class="n">MongoClient</span>

<span class="c1"># Hier spezifiziere ich ein JSON Objekt</span>
<span class="n">json_object</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Michael&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;nname&quot;</span><span class="p">:</span> <span class="s2">&quot;Kohlegger&quot;</span><span class="p">,</span> 
    <span class="s2">&quot;hobbies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Laufen&quot;</span><span class="p">,</span> <span class="s2">&quot;Lesen&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Als nächstes verbinden wir uns mit unserem MongoDB-Server und wählen DB &amp; Collection</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">MongoClient</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;80.93.46.242&quot;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">3313</span><span class="p">)</span>
<span class="n">database</span> <span class="o">=</span> <span class="n">server</span><span class="p">[</span><span class="s2">&quot;de01_kohlegger_db&quot;</span><span class="p">]</span>
<span class="n">collection</span> <span class="o">=</span> <span class="n">database</span><span class="p">[</span><span class="s2">&quot;mega_tutorial&quot;</span><span class="p">]</span>

<span class="c1"># Hier fügen wir unser JSON Objekt ein</span>
<span class="n">collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">json_object</span><span class="p">)</span>

<span class="c1"># Zum Schluss können wir unsere Daten z.B. wie folgt abfragen.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="c1"># Zuletzt schließen wir die Session mit dem Server</span>
<span class="n">server</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="terminal-unix-bzw-kommandozeile-windows_2">Terminal (Unix) bzw. Kommandozeile (Windows)</h3>
<p>Ähnlich wie in MySQL und Cassandra gibt es auch bei MongoDB ein einfaches CLI (command line interface), das wir verwenden können um direkt am Server mit unserem Cluster zu interagieren. </p>
<p>Das CLI von MongoDB kann am Hostrechner (der Rechner, auf dem der MongoDB-Service läuft) mit folgendem Befehl im Terminal/Kommandozeile aufgerufen werden (hier am Beispiel des Rechners mit der IP <code>192.168.150.232</code>):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>mongo
</code></pre></div></td></tr></table></div>
<p><img alt="Screenshot eines Terminal Fensters für MongoDB" src="img/mongo_cli.PNG" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Michael Kohlegger
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/mckoh" target="_blank" rel="noopener" title="Michael Kohlegger on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "content.code.copy", "navigation.sections", "navigation.path", "navigation.footer", "toc.integrate", "navigation.top"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>